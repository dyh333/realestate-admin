<div class="group-manage-header">
  <div class="function-module-name">
    <span class="module-name">楼盘管理</span>
  </div>
  <div class="function-list">
    <button nz-button nzType="primary" (click)="addAGroup()">新增</button>
    <button nz-button nzType="default" (click)="deleteGroups()">删除</button>
  </div>
  <div style="clear: both"></div>
</div>
<div class="group-manage-content">
  <div class="search-result">共找到
    <strong>{{groupTotal}}</strong>个楼盘</div>
  <div class="search-content">
    <nz-table class="na-table" #rowSelectionTable [nzData]="data" (nzCurrentPageDataChange)="currentPageDataChange($event)" (nzPageIndexChange)="refreshStatus()"
      (nzPageSizeChange)="refreshStatus()">
      <thead>
        <tr>
          <th nzShowCheckbox [(nzChecked)]="allChecked" [nzIndeterminate]="indeterminate" (nzCheckedChange)="checkAll($event)"></th>
          <th>楼盘名称</th>
          <th>建筑物数量</th>
          <th>户室数量</th>
          <th>小区名</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of rowSelectionTable.data">
          <td nzShowCheckbox [(nzChecked)]="data.checked" [nzDisabled]="data.disabled" (nzCheckedChange)="refreshStatus($event)"></td>
          <td>{{data.Name}}</td>
          <td>{{data.BuildingCount}}</td>
          <td>{{data.RoomCount}}</td>
          <td>{{data.CourtName}}</td>
          <td>
            <a (click)="editTheGroup(data)">编辑</a>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </div>
</div>
<!-- 新增或者编辑楼盘 -->
<nz-modal *ngIf="isAddOrUpdataModalVisible" nzWrapClassName="vertical-center-modal" [(nzVisible)]="isAddOrUpdataModalVisible"
  [nzTitle]="modalTitle" [nzContent]="modalContent" [nzFooter]="modalFooter" (nzOnCancel)="closeTheModal()">
  <ng-template #modalTitle>
    {{theModalTitle}}
  </ng-template>

  <ng-template #modalContent>
    <form nz-form [formGroup]="validateForm" (ngSubmit)="checkForm()">
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="Name">楼盘名称</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="Name" id="Name">
          <nz-form-explain *ngIf="validateForm.get('Name').dirty && validateForm.get('Name').errors">请输入楼盘名称!</nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="BuildingCount" nzRequired>建筑物数量</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <nz-input-number class="nz-input-number" formControlName="BuildingCount" id="BuildingCount"></nz-input-number>
          <nz-form-explain *ngIf="validateForm.get('BuildingCount').dirty && validateForm.get('BuildingCount').errors">请输入建筑物数量!</nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="RoomCount" nzRequired>户室数量</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <nz-input-number class="nz-input-number" formControlName="RoomCount" id="RoomCount"></nz-input-number>
          <nz-form-explain *ngIf="validateForm.get('RoomCount').dirty && validateForm.get('RoomCount').errors">
            请输入户室数量
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="CourtName" nzRequired>小区名称</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input id="CourtName" formControlName="CourtName">
          <nz-form-explain *ngIf="validateForm.get('CourtName').dirty && validateForm.get('CourtName').errors">请输入小区名称</nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-template>

  <ng-template #modalFooter>
    <ng-container *ngIf="!isAdd">
      <button nz-button nzType="primary" (click)="submitTheModal()">保存</button>
      <button nz-button nzType="default" (click)="closeTheModal()">取消</button>
    </ng-container>
    <ng-container *ngIf="isAdd">
      <button nz-button nzType="primary" (click)="submitTheModal()">新增</button>
    </ng-container>
  </ng-template>
</nz-modal>
<!-- 删除功能的确认框 -->
<nz-modal *ngIf="isDelModalVisible" nzWrapClassName="vertical-center-modal" [(nzVisible)]="isDelModalVisible" [nzTitle]="modalTitle"
  [nzContent]="modalContent" [nzFooter]="modalFooter" (nzOnCancel)="closeTheDelModal()">
  <ng-template #modalTitle>
    <i class="anticon anticon-question-circle" style="margin-right:10px;color: #faad14;"></i>注意
  </ng-template>
  <ng-template #modalContent>
    <b *ngIf="toDelDataList.length>0">您确认想删除选中的{{toDelDataList.length}}条楼盘？</b>
    <b *ngIf="toDelDataList.length<=0">请选项要删除的楼盘!</b>
  </ng-template>
  <ng-template #modalFooter>
    <button nz-button nzType="primary" (click)="confirmTheDelModal()">确认</button>
    <ng-container *ngIf="toDelDataList.length>0">
      <button nz-button nzType="default" (click)="closeTheDelModal()">取消</button>
    </ng-container>
  </ng-template>
</nz-modal>
